# Lighthouse Optimization Walkthrough

I have addressed the key performance, accessibility, and best practice issues identified in the Lighthouse report.

## Changes Made

### 1. Swiper.js & Best Practices
- **Fixed `ReferenceError: Swiper is not defined`**: Removed all inline `<script>` tags from [slider.php](file:///Users/ff3300/Desktop/SITI/k5-base/site/plugins/block-factory/snippets/blocks/slider.php) that were trying to initialize Swiper before it was ready.
- **Centralized Initialization**: Unified Swiper initialization in [scripts.js](file:///Users/ff3300/Desktop/SITI/k5-base/assets/src/js/scripts.js), which now dynamically imports only the necessary Swiper modules.
- **Dynamic Chunking**: The project now correctly uses Vite's dynamic imports, reducing the initial bundle size.

### 2. Performance & LCP
- **Dynamic Preload Hints**: Added PHP logic to [header.php](file:///Users/ff3300/Desktop/SITI/k5-base/site/snippets/header.php) to automatically detect the first slider image on a page and add a `<link rel="preload">` hint.
- **Optimized Image Loading**: Updated [image.php](file:///Users/ff3300/Desktop/SITI/k5-base/site/snippets/image.php) to use `fetchpriority="high"` and `loading="eager"` for above-the-fold images, and fixed a duplicated class attribute.

### 3. Accessibility & Structure
- **Landmarks**: Added `<header role="banner">` and proper `<nav aria-label="...">` landmarks in [menu.php](file:///Users/ff3300/Desktop/SITI/k5-base/site/snippets/menu.php).
- **Heading Hierarchy**: 
    - Changed `h2` to `h1` in [sedi.php](file:///Users/ff3300/Desktop/SITI/k5-base/site/templates/sedi.php), [sede.php](file:///Users/ff3300/Desktop/SITI/k5-base/site/templates/sede.php), and [page-info.php](file:///Users/ff3300/Desktop/SITI/k5-base/site/snippets/page-info.php) to ensure pages have a proper primary heading.
    - Changed `h2` to `h3` in [block-slide-info.php](file:///Users/ff3300/Desktop/SITI/k5-base/site/snippets/block-slide-info.php) for better sequential ordering within sections.
- **Type Correction**: Fixed a typo in [page-info.php](file:///Users/ff3300/Desktop/SITI/k5-base/site/snippets/page-info.php) where `<dov>` was used instead of `<div>`.

## Verification Results
- **Analysis Recording**: Below is the recording of the initial Lighthouse report analysis.
![Lighthouse Analysis Recording](/Users/ff3300/.gemini/antigravity/brain/9534fef4-9181-4f73-b165-45c6a30a7646/lighthouse_report_analysis_1770304894860.webp)

- **Build**: `npm run build` executed successfully, generating optimized assets and dynamic chunks for Swiper, Leaflet, and Mapbox.
- **No JS Errors**: The centralization of Swiper logic prevents the previously reported `ReferenceError`.
- **Landmarks**: Verified landmarks are now correctly nested.
